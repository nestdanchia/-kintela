<app-listado-generico [listado]="concursos">
<!--<ng-container vacio>
  <div>
    No se ha cargado correctamente la lista de ofertas. Ponte en contacto con Roberto Quintela
    (rquintela@fulcrum.es)
  </div>
</ng-container>

<ng-container cargando>
</ng-container>-->

<ng-container contenido>
  <h5>{{dataSource.filteredData.length}} coincidencias</h5>

  <div *ngIf="clickedRowsWhite.size || clickedRowsGreen.size || clickedRowsRed.size"  >
    <button mat-flat-button (click)="limpiarSeleccion()" color="warn">Limpiar Selección</button>
  </div>

  <div *ngIf="clickedRowsWhite.size || clickedRowsGreen.size || clickedRowsRed.size"  >
    <button mat-flat-button (click)="guardar()" color="primary">Guardar</button>
  </div>

  <mat-form-field appearance="standard">
    <mat-label>Filtrar</mat-label>
    <input matInput (keyup)="filtrar($event)" #input>
  </mat-form-field>


  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

    <ng-container matColumnDef="id" sticky>
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
      <td mat-cell *matCellDef="let element">{{element.id}}</td>
    </ng-container>
    <ng-container matColumnDef="archivo">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Archivo</th>
      <td mat-cell *matCellDef="let element">{{element.archivo}}</td>
    </ng-container>
    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
      <td mat-cell *matCellDef="let element">{{element.estado}}</td>
    </ng-container>
    <ng-container matColumnDef="organismo">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Organismo</th>
      <td mat-cell *matCellDef="let element">{{element.organismoNombre}}</td>
    </ng-container>
    <ng-container matColumnDef="descripcion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Descripción</th>
      <td mat-cell *matCellDef="let element" [matTooltip]="element.descripcion">{{element.descripcionCorta}}</td>
    </ng-container>
    <ng-container matColumnDef="importe">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Importe</th>
      <td mat-cell *matCellDef="let element">{{element.importe | currency: 'EUR'}}</td>
    </ng-container>
    <ng-container matColumnDef="fechaOrientativa">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fª Orientativa</th>
      <td mat-cell *matCellDef="let element">{{element.fechaOrientativa | date:'dd/MM/yyyy'}}</td>
    </ng-container>
    <ng-container matColumnDef="plazoEjecucion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Plazo Ejecución</th>
      <td mat-cell *matCellDef="let element">{{element.plazoEjecucion}}</td>
    </ng-container>
    <ng-container matColumnDef="estudiar">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estudiar</th>
      <td mat-cell *matCellDef="let element">{{element.estudiar}}</td>
    </ng-container>
    <ng-container matColumnDef="fechaArchivo">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fª Archivo</th>
      <td mat-cell *matCellDef="let element">{{element.fechaArchivo | date:'dd/MM/yyyy'}}</td>
    </ng-container>
    <ng-container matColumnDef="tema">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Tema</th>
      <td mat-cell *matCellDef="let element">{{element.tema}}</td>
    </ng-container>
    <ng-container matColumnDef="expediente">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Expediente</th>
      <td mat-cell *matCellDef="let element">{{element.expediente}}</td>
    </ng-container>
    <ng-container matColumnDef="contrato">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Contrato</th>
      <td mat-cell *matCellDef="let element">{{element.contrato}}</td>
    </ng-container>
    <ng-container matColumnDef="formaAdjudicacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Forma Adjudicación</th>
      <td mat-cell *matCellDef="let element">{{element.formaAdjudicacion}}</td>
    </ng-container>
    <ng-container matColumnDef="garantia">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Garantía</th>
      <td mat-cell *matCellDef="let element">{{element.garantia}}</td>
    </ng-container>
    <ng-container matColumnDef="administracion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Administración</th>
      <td mat-cell *matCellDef="let element">{{element.administracion}}</td>
    </ng-container>
    <ng-container matColumnDef="publicacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Publicación</th>
      <td mat-cell *matCellDef="let element">{{element.publicacion}}</td>
    </ng-container>
    <ng-container matColumnDef="pais">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>País</th>
      <td mat-cell *matCellDef="let element">{{element.pais}}</td>
    </ng-container>
    <ng-container matColumnDef="provincia">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Provincia</th>
      <td mat-cell *matCellDef="let element">{{element.provincia}}</td>
    </ng-container>
    <ng-container matColumnDef="ciudad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Ciudad</th>
      <td mat-cell *matCellDef="let element">{{element.ciudad}}</td>
    </ng-container>-->

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr
        mat-row
        matRipple
        (click)="cambiarColor(row)"
        [class.row-is-clicked-white]="clickedRowsWhite.has(row)"
        [class.row-is-clicked-green]="clickedRowsGreen.has(row) "
        [class.row-is-clicked-red]="clickedRowsRed.has(row)"
        *matRowDef="let row; columns: columnsToDisplay;"
    ></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">No se han encontrado coincidencias "{{input.value}}"</td>
    </tr>
  </table>
</ng-container>
</app-listado-generico>
